# Конвертер текстов созданных на MSX в кодировку UTF-8
Таблица символов MSX:

![Таблица символов MSX](msx_font-russian.png)

Описание:
* 00h-7Fh — первые 128 символов соответствуют международной раскладке
* 80h-BEh — символы, которые в международной таблице находятся в диапазоне C0h-FEh
* BFh-FEh — русские символы
* FFh — курсор
* 40h-5Fh — графические символы, для обращение к ним используется префикс 01h

Русский набор символов в основном соответствует KOI8-R, за исключением того, что на MSX отсутствуют буквы «Ъ», «Ё» и «ё». 

Для подбора UTF символов использовался сайт https://unicode-table.com/ru/ проекта ![unicode-table-data](https://github.com/unicode-table/unicode-table-data)

Пока не подобраны замены для символов с кодами:
* 5Fh
* 85h
* 88h
* 0148h
* 0150h

Проект был создан для работы над файлами книги ![Пособие по программированию на MSX BASIC](https://github.com/mr-GreyWolf/MSX-BASIC-Programming-Guide-Russian)

**msx_russian-utf8.py** скрипт для конвертирования одного файла

**msx2file.bas** файл для вывода таблицы кодов символов в файл test.msx

**test.msx** файл созданный программой msx2file.bas

**test.txt** результат работы скрипта msx_russian-utf8.py с файлом test.msx

### msx_russian-utf8.py
Для написания скрипта использовался Python 2.7

Скрипт производит побайтовое чтение исходного файла (в кодировке MSX), в зависимости от значения байта выполняется его замена (конвертирование) и сохранение спецальную переменную. После достижения конца исходного файла сконвертированная последовательность байт сохраняется из переменной в конечный файл.

Пример: ./msx_russian-utf8.py test.msx test.txt

### msx_russian-utf8-batch_mode.sh
Скрипт для конвертирования нескольких файлов.

Для его работы нужно задать переменные:

` files_path='.' `путь к исходным и конечным файлам

` file_ext_msx='.msx' `расширение исходного файла (MSX)

` file_msx_mask='test' `	маска исходных файлов, без расширения (MSX)

` file_ext_utf='.txt'	` расширение конечного файла (UTF-8)
